import{a as e,r,u as R,j as n,c as p,d as v,e as k,R as A,f as C,L as $}from"./index.e59e159d.js";import{u as g,b as y,c as I,d as S}from"./api.675a5a4a.js";const H="_comments_10gs7_1";var D={comments:H};const L="_item_1uyaz_1";var Q={item:L};const w=t=>e("li",{className:Q.item,children:e("p",{children:t.text})}),B="_comments_1hhzv_1";var E={comments:B};const F=t=>e("ul",{className:E.comments,children:t.comments.map(o=>e(w,{text:o.text},o.id))}),j=t=>e("h3",{style:{color:"crimson",padding:".3rem 2rem",margin:"1rem 4rem"},children:t.comment}),z="_form_10hnu_1",M="_loading_10hnu_7",P="_control_10hnu_17",T="_actions_10hnu_43";var f={form:z,loading:M,control:P,actions:T};const U=t=>{const o=r.exports.useRef(),m=r.exports.useRef(),[c,d]=r.exports.useState("Please put a comment..."),[a,s]=r.exports.useState(!1),{sendRequest:_,status:i,error:u}=g(y),{onAddedComment:l}=t,N=R(),x=q=>{q.preventDefault();const h=o.current;if(h.value)s(!1);else return h.focus(),s(!0),!1;_({commentData:{text:h.value},quoteId:t.quoteId})},b=()=>{N.goBack()};return r.exports.useEffect(()=>{i==="completed"&&!u&&(l(),o.current.value="")},[i,u,l]),n("form",{className:f.form,onSubmit:x,children:[i==="pending"&&n("div",{className:"centered",children:[" ",e(p,{})]}),n("div",{className:f.control,onSubmit:x,children:[e("label",{htmlFor:"comment",children:"Your Comment"}),e("textarea",{id:"comment",rows:"5",ref:o,placeholder:"make a comment..."}),e("div",{ref:m,children:a&&e(j,{comment:c})})]}),n("div",{className:f.actions,style:{display:"flex",flexBasis:"60%",gap:"1rem"},children:[e("button",{className:"btn",onClick:b,children:"Back"}),e("button",{className:"btn",children:"Add Comment"})]})]})},Y=()=>{const[t,o]=r.exports.useState(!1),m=v();console.log(m);const{quoteID:c}=m,{sendRequest:d,status:a,data:s,error:_}=g(I),i=()=>{o(!0)},u=r.exports.useCallback(()=>{d(c)},[d,c]);let l;return a==="pending"&&(l=n("div",{className:"centered",children:[" ",e(p,{})]})),r.exports.useEffect(()=>{d(c)},[c,d]),a==="completed"&&s&&s.length>0&&(l=e("div",{children:e(F,{comments:s})})),a==="completed"&&(!s||s.length===0)&&(l=e("div",{className:"centered",children:" No comments were added yet "})),n("section",{className:D.comments,children:[e("h2",{children:"User Comments"}),!t&&e("button",{className:"btn",onClick:i,children:"Add a Comment"}),t&&e(U,{quoteId:c,onAddedComment:u}),e("div",{children:l})]})},G="_quote_1eudw_3";var J={quote:G};const K=t=>n("figure",{className:J.quote,children:[n("p",{children:['"',t.text,'"']}),n("figcaption",{children:["__ ",t.author]})]}),W=()=>{const t=k(),o=v(),{quoteID:m}=o,{sendRequest:c,status:d,data:a,error:s}=g(S,!0);return r.exports.useEffect(()=>{c(m)},[c,m]),d==="pending"?e("div",{className:"centered",children:e(p,{})}):s?e("p",{className:"centered",children:s}):a?n(A.Fragment,{children:[e(K,{text:a.text,id:a.id,author:a.author}),e(C,{path:`${t.path}`,exact:!0,children:e("div",{className:"centered",children:n($,{className:"btn",to:`${t.url}/comments`,children:[" ","Load a Comments"]})})}),e(C,{path:`${t.path}/comments`,children:e(Y,{})})]}):e("p",{children:"No Quote found !"})};export{W as default};
